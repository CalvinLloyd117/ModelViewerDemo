<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Title</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Archivo+Black|Lato:400&display=swap" rel="stylesheet">
</head>

<body>
    <nav class="primary-nav">
        <ul class="indexNav">
            <li><a href="index.html" class="button navButton nowrap ">Basics</a>
            </li>
            <li><a href="animation.html" class="button navButton nowrap">Animation</a>
            </li>
            <li><a href="camera.html" class="button navButton nowrap">Camera</a>
            </li>
            <li><a href="loading.html" class="button navButton nowrap">Loading</a>
            </li>
            <li><a href="environment.html" class="button navButton nowrap">Environment</a>
            </li>
            <li><a href="annotation.html" class="button navButton nowrap">Hotspots</a>
            </li>
            <li><a href="ar.html" class="button navButton nowrap">AR</a>
            </li>
            <li><a href="compatibility.html" class="button navButton nowrap navItemPA">Performance and Compatibility</a>
            </li>
        </ul>
    </nav>
    <div class="wrapper">
        <div class="grid-parent">
            <div class="text-container">
                <h1>Performance</h1>
                <p><b>Disclaimer:</b> Performance is the category that I have spent the least amount of time exploring.</p>
                <h2>Framerate and Loading</h2>
                <p>Performance is tough to judge here, unfortunately. Model-Viewer is built on the three.js library. As a result, it offers a comparable experience in terms of both frames-per-second (FPS) and load times when compared to three.js in its raw
                    form. Again, it is hard to measure this besides in a purely visual manner.</p>
                <h3>Comparison Between three.js and Model-Viewer</h3>
                <p><a href="tjs.html" class="button navButton nowrap">three.js</a> VS. <a href="mv.html" class="button navButton nowrap">Model-Viewer</a></p>
                <p>It goes without saying, more powerful and modern machines will have a distinct advantage when viewing any 3D model on the web. They are capable of a much (much) smoother experience in terms of loading and especially FPS counts. My gaming
                    desktop for example, has no problems rendering these models, even in copious quantities. Over 150 models rendered on a single page at a time, and my desktop did not even flinch. Not even when throttling the CPU by 6x in Google Chrome.</p>
                <p>Interestingly, throttling the CPU had virutally no impact. What did have an impact however, was disabling <i>hardware (HW) acceleration</i> in my browser. HW Acceleration allows for an application to access special HW present in the machine
                    in order to better perform a task. In this case, by disabling HW acceleration in Chrome I took away the browsers ability to access my Graphics Card (GPU), and my FPS counts plummeted (but were still perfectly acceptable) as a result.
                    This shows without a doubt that Model-Viewer (and by extension three.js) render models on the GPU where applicable. This explains why CPU throttling had no impact.</p>
                <p>As a true test, I subjected this demo site to the two slowest devices that I could think of. The first was my Surface Pro 3. This site runs fine on that device, load times and FPS are both acceptable, and despite the slow nature of the
                    device, it performed fine when running Model-Viewer.</p>
                <p>The slowest device I own is my Samsung Galaxy Note 5 (2015) smartphone. Unfortunately, performance here suffered. While the models were still interactable, FPS and load times were noticably slower.</p>
                <p>A Samsung Galaxy S7, a Phone from 2016 was able to render the models easily on this demo site. I am not certain what the issue is with my phone, but other devices seem to have perfectly acceptable performance.</p>
            </div>
            <div class="model-container">
                <model-viewer id="testKnife2" src="models/Sheath/sheath.gltf" interaction-prompt="auto" camera-controls auto-rotate interaction-prompt="none" interaction-policy="allow-when-focused" alt="A 3D model of a Blackfoot Knife">
                </model-viewer>
                <script>
                    (() => {
                        const modelViewer = document.querySelector('#testKnife2');
                        142
                        $('#rotateOn').click(function() {
                            $('#testKnife2').attr('auto-rotate', 'auto-rotate')
                        });
                        $('#rotateOff').click(function() {
                            $('#testKnife2').removeAttr('auto-rotate')
                        });
                        $('#wiggleOn').click(function() {
                            $('#testKnife2').attr('interaction-prompt', 'auto')
                        });
                        $('#wiggleOff').click(function() {
                            $('#testKnife2').attr('interaction-prompt', 'basic')
                        });
                    })();
                </script>
            </div>
            <div class="text-container">
                <h1>Compatibility</h1>
                <p>Model-Viewer has great browser support accross the board. In cases where a feature is not supported natively, it can be made compatible by including a <i>polyfill.</i></p>
                <p>In web-development, a <b>polyfill</b> is code that implements a feature on a browser that does not natively support that feature. Polyfills can typically be included to a site with very negligible overhead. </p>
                <p>In addition to enabling older browsers to support Model-Viewer, polyfills can also be included to optimize performance, and ensure that all of Model-Viewers features are supported.</p>
                <h2>Browsers and Support</h2>
                <p>As of now, I have done some testing on Chrome, MS Edge, and Firefox.</p>
                <p>Performance is best on Chrome. MS Edge has similar FPS and load times. Unfortunately, when loading models on Edge, a strange blue circle covers the model while it loads. </p>
                <p>Firefox has regular load times, but FPS counts are noticably lower here, even with HW acceleration enabled. CPU usage is also extremely high for some reason. This problem is also present on the official model-viewer site, and seems to
                    affect three.js models as well, albeit to a lesser extent.</p>
                <p>Internet Explorer does not seem to run model-viewer for some reason, even though it is supposed to. IE11 does not even seem to support CSS grid, so no surprise there.</p>
                <p>As far as Safari, I was unable to do testing here, as I do not own an Apple device and Safari is no longer supported on Windows. The latest Windows release of Safari was version 5.1.7, and Safari is currently at version 13.</p>
                <h2>Apple iOS and Magic-Leap</h2>
                <p>Another note-worthy thing is that for AR functionality on iOS and Magic Leap, some additional steps must be taken (typical Apple...).</p>
                <p>For iOS, the <i>ios-src</i> attribute needs to be defined which links to a DSDZ model for AR on Safari.</p>
                <p>On Magic Leap's Helio Browser, the <i>magic-leap</i> tag must be defined which links to a .glb model. Additionally, Magic Leap requires that <i>@magicleap/prismatic</i> Javascript Library be included. </p>
            </div>
            <div class="compat-container">
                <p style="position:absolute;bottom:0;right:0;padding-right: 25px;">Chart taken from <a href="https://modelviewer.dev/">https://modelviewer.dev/</a></p>
            </div>
        </div>
    </div>
    <script src="js/scripts.js"></script>
    <!-- 游누 Include both scripts below to support all browsers! -->

    <!-- Loads <model-viewer> for modern browsers: -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.js">
    </script>
    <!-- <script type="module" src="https://modelviewer.dev/dist/model-viewer.js"></script> -->
    <!-- <script type="module" src="node_modules/@google/model-viewer/dist/model-viewer.js"></script> -->

    <!-- Loads <model-viewer> for old browsers like IE11: -->
    <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script>
    <script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.1.3/webcomponents-loader.js">
    </script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <!-- 游누 OPTIONAL: Intersection Observer polyfill for better performance in Safari and IE11 -->
    <script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>

    <!-- 游누 OPTIONAL: Resize Observer polyfill improves resize behavior in non-Chrome browsers -->
    <script src="https://unpkg.com/resize-observer-polyfill@1.5.0/dist/ResizeObserver.js"></script>

    <!-- 游누 OPTIONAL: Fullscreen polyfill is required for experimental AR features in Canary -->
    <script src="https://unpkg.com/fullscreen-polyfill@1.0.2/dist/fullscreen.polyfill.js"></script>

    <!-- 游누 OPTIONAL: The :focus-visible polyfill removes the focus ring for some input types -->
    <script src="https://unpkg.com/focus-visible@5.0.1/dist/focus-visible.js" defer></script>

    <!-- 游누 OPTIONAL: Include prismatic.js for Magic Leap support -->
    <script src="https://unpkg.com/@magicleap/prismatic@0.18.2/prismatic.min.js"></script>
    </script>
</body>

</html>